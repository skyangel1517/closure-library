<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>goog.testing.MockClock</title><link href="dossier.css" rel="stylesheet" type="text/css"><script src="types.js" defer></script><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="dossier-main"><main data-page-data="[null,[[[&quot;goog.testing.MockClock&quot;,null,null,null,[null,54,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L54&quot;]],null,[[[null,&quot;&lt;p&gt;Class for unit testing code that uses setTimeout and clearTimeout.&lt;/p&gt;\n&lt;p&gt;NOTE: If you are using MockClock to test code that makes use of\ngoog.fx.Animation, then you must either:&lt;/p&gt;\n&lt;ol&gt;&lt;li&gt;Install and dispose of the MockClock in setUpPage() and tearDownPage()\nrespectively (rather than setUp()/tearDown()).&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;or&lt;/p&gt;\n&lt;ol start=\&quot;2\&quot;&gt;&lt;li&gt;Ensure that every test clears the animation queue by calling\nmockClock.tick(x) at the end of each test function (where &lt;code&gt;x&lt;/code&gt; is large\nenough to complete all animations).&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;Otherwise, if any animation is left pending at the time that\nMockClock.dispose() is called, that will permanently prevent any future\nanimations from playing on the page.&lt;/p&gt;\n&quot;]]],[null,null,null,1],null,[],null,[],[[[&quot;MockClock.REQUEST_ANIMATION_FRAME_TIMEOUT&quot;,[null,109,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L109&quot;]],[[[null,&quot;&lt;p&gt;Default wait timeout for mocking requestAnimationFrame (in milliseconds).&lt;/p&gt;\n&quot;]]],null,null,[1],null,null,[],[]],[null,null,null,[&quot;number&quot;,null,null,1,[]]]],[[&quot;MockClock.nextId&quot;,[null,117,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L117&quot;]],[[[null,&quot;&lt;p&gt;ID to use for next timeout.  Timeout IDs must never be reused, even across\nMockClock instances.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[null,null,null,[&quot;number&quot;,null,null,1,[]]]]],[[&quot;MockClock&quot;,[null,54,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L54&quot;]],[[[null,&quot;&lt;p&gt;Class for unit testing code that uses setTimeout and clearTimeout.&lt;/p&gt;\n&lt;p&gt;NOTE: If you are using MockClock to test code that makes use of\ngoog.fx.Animation, then you must either:&lt;/p&gt;\n&lt;ol&gt;&lt;li&gt;Install and dispose of the MockClock in setUpPage() and tearDownPage()\nrespectively (rather than setUp()/tearDown()).&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;or&lt;/p&gt;\n&lt;ol start=\&quot;2\&quot;&gt;&lt;li&gt;Ensure that every test clears the animation queue by calling\nmockClock.tick(x) at the end of each test function (where &lt;code&gt;x&lt;/code&gt; is large\nenough to complete all animations).&lt;/li&gt;&lt;/ol&gt;\n&lt;p&gt;Otherwise, if any animation is left pending at the time that\nMockClock.dispose() is called, that will permanently prevent any future\nanimations from playing on the page.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],1,[[&quot;opt_autoInstall&quot;,[1,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Install the MockClock at construction time.&lt;/p&gt;\n&quot;]]]]],null,[]],[[[&quot;addOnDisposeCallback&quot;,[null,221,null,[null,null,&quot;closure/goog/disposable/disposable.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/disposable/disposable.js#L221&quot;]],[[[null,&quot;&lt;p&gt;Invokes a callback function when this object is disposed. Callbacks are\ninvoked in the order in which they were added. If a callback is added to\nan already disposed Disposable, it will be called immediately.&lt;/p&gt;\n&quot;]]],null,null,null,[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html#addOnDisposeCallback&quot;]],null,[]],null,[],[]],[&quot;T&quot;],null,[[&quot;callback&quot;,[null,null,[null,[null,null,null,null,null,[[[null,null,null,[&quot;T&quot;,null,null,null,[]]],[null,null,null,null,null,null,null,null,null,1]]]],[],[null,null,null,null,null,null,null,1]]],[[[null,&quot;&lt;p&gt;The callback function.&lt;/p&gt;\n&quot;]]]],[&quot;opt_scope&quot;,[1,null,null,null,null,[[[null,null,null,[&quot;T&quot;,null,null,null,[]]],[null,null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;An optional scope to call the callback in.&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;dispose&quot;,[null,42,null,[null,null,&quot;closure/goog/disposable/idisposable.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/disposable/idisposable.js#L42&quot;]],[[[null,&quot;&lt;p&gt;Disposes of the object and its resources.&lt;/p&gt;\n&quot;]]],null,null,null,null,[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html#dispose&quot;]],null,[]],[[&quot;goog.disposable.IDisposable&quot;,null,[null,null,[null,null,&quot;goog.disposable.IDisposable.html#dispose&quot;]],null,[]]],[]],[],null,[],[null,null,[[[null,&quot;&lt;p&gt;Nothing.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;disposeInternal&quot;,[null,293,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L293&quot;]],[[[null,&quot;&lt;p&gt;Performs appropriate cleanup. See description of goog.disposable.IDisposable\nfor examples. Classes that extend &lt;code&gt;goog.Disposable&lt;/code&gt; should override this\nmethod. Not reentrant. To avoid calling it twice, it must only be called from\nthe subclass&amp;#39; &lt;code&gt;disposeInternal&lt;/code&gt; method. Everywhere else the public &lt;code&gt;dispose&lt;/code&gt;\nmethod must be used. For example:&lt;/p&gt;\n &lt;pre&gt;\n mypackage.MyClass &amp;#61; function() {\n mypackage.MyClass.base(this, &amp;#39;constructor&amp;#39;);\n     // Constructor logic specific to MyClass.\n     ...\n   };\n   goog.inherits(mypackage.MyClass, goog.Disposable);\n\n   mypackage.MyClass.prototype.disposeInternal &amp;#61; function() {\n     // Dispose logic specific to MyClass.\n     ...\n     // Call superclass&amp;#39;s disposeInternal at the end of the subclass&amp;#39;s, like\n     // in C&amp;#43;&amp;#43;, to avoid hard-to-catch issues.\n     mypackage.MyClass.base(this, &amp;#39;disposeInternal&amp;#39;);\n   };\n &lt;/pre&gt;\n&quot;]]],null,null,null,null,[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html#disposeInternal&quot;]],null,[]],[],[],[null,1]],[],null,[],null,[]],[[&quot;doTimeWarpAsync&quot;,[null,524,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L524&quot;]],[[[null,&quot;&lt;p&gt;Instantly adjusts the clock&amp;#39;s current time to a new timestamp. Unlike tick(),\nthis method skips over the intervening time, so that &lt;code&gt;setInterval()&lt;/code&gt; calls or\nrecurring &lt;code&gt;setTimeout()&lt;/code&gt;s will only run once.&lt;/p&gt;\n&lt;p&gt;This mimics the behavior of setting the system clock, rather than waiting for\ntime to pass.&lt;/p&gt;\n&lt;p&gt;CAUTION: This is an advanced feature.  Use this method to set the clock to be\na specific date, which is much faster than calling tick() with a large value.\nThis lets you test code against arbitrary dates.&lt;/p&gt;\n&lt;p&gt;MOE:begin_strip\nSee go/mockclock-time-travel for how &amp;amp; why to use this method.\nMOE:end_strip&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;newDate&quot;,[null,null,null,[&quot;Date&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The new timestamp to set the clock to.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;Promise&quot;,null,null,1,[]]]],[]],[[&quot;getCallbacksTriggered&quot;,[null,439,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L439&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The number of timeout or interval callbacks that have been\ntriggered. For setInterval, each callback is counted separately.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getCurrentTime&quot;,[null,448,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L448&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The MockClock&amp;#39;s current time in milliseconds.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getDisposed&quot;,[null,158,null,[null,null,&quot;closure/goog/disposable/disposable.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/disposable/disposable.js#L158&quot;]],[[]],[[[null,&quot;&lt;p&gt;Use &lt;a href=\&quot;goog.testing.MockClock.html#isDisposed\&quot;&gt;&lt;code&gt;#isDisposed&lt;/code&gt;&lt;/a&gt; instead.&lt;/p&gt;\n&quot;]]],null,[null,1],[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html#getDisposed&quot;]],null,[]],null,[],[]],[],null,[],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Whether the object has been disposed of.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getTimeoutDelay&quot;,[null,345,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L345&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;delay The amount of time between when a timeout is\nscheduled to fire and when it actually fires, in milliseconds.  May\nbe negative.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;getTimeoutsMade&quot;,[null,429,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L429&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[],[null,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The number of timeouts or intervals that have been\nscheduled. A setInterval call is only counted once.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;install&quot;,[null,180,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L180&quot;]],[[[null,&quot;&lt;p&gt;Installs the MockClock by overriding the global object&amp;#39;s implementation of\nsetTimeout, setInterval, clearTimeout and clearInterval.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;isDisposed&quot;,[null,48,null,[null,null,&quot;closure/goog/disposable/idisposable.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/disposable/idisposable.js#L48&quot;]],[[]],null,null,null,null,[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html#isDisposed&quot;]],null,[]],[[&quot;goog.disposable.IDisposable&quot;,null,[null,null,[null,null,&quot;goog.disposable.IDisposable.html#isDisposed&quot;]],null,[]]],[]],[],null,[],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Whether the object has been disposed of.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;isTimeoutSet&quot;,[null,463,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L463&quot;]],[[]],null,null,null,null,null,[],[]],[],null,[[&quot;timeoutKey&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The timeout key.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;boolean&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Whether the timer has been set and not cleared,\nindependent of the timeout&amp;#39;s expiration.  In other words, the timeout\ncould have passed or could be scheduled for the future.  Either way,\nthis function returns true or false depending only on whether the\nprovided timeoutKey represents a timeout that has been set and not\ncleared.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;registerDisposable&quot;,[null,207,null,[null,null,&quot;closure/goog/disposable/disposable.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/disposable/disposable.js#L207&quot;]],[[[null,&quot;&lt;p&gt;Associates a disposable object with this object so that they will be disposed\ntogether.&lt;/p&gt;\n&quot;]]],null,null,null,[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html#registerDisposable&quot;]],null,[]],null,[],[]],[],null,[[&quot;disposable&quot;,[null,null,null,null,null,[[[null,null,null,[&quot;goog.disposable.IDisposable&quot;,null,[null,null,[null,null,&quot;goog.disposable.IDisposable.html&quot;]],null,[]]],[null,null,null,null,null,null,null,null,null,1]]]],[[[null,&quot;&lt;p&gt;that will be disposed when\nthis object is disposed.&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;reset&quot;,[null,306,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L306&quot;]],[[[null,&quot;&lt;p&gt;Resets the MockClock, removing all timeouts that are scheduled and resets\nthe fake timer count.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;setTimeoutDelay&quot;,[null,334,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L334&quot;]],[[[null,&quot;&lt;p&gt;Sets the amount of time between when a timeout is scheduled to fire and when\nit actually fires.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;delay&quot;,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;The delay in milliseconds.  May be negative.&lt;/p&gt;\n&quot;]]]]],null,[]],[[&quot;tick&quot;,[null,358,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L358&quot;]],[[[null,&quot;&lt;p&gt;Increments the MockClock&amp;#39;s time by a given number of milliseconds, running\nany functions that are now overdue.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;opt_millis&quot;,[1,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Number of milliseconds to increment the counter.\nIf not specified, clock ticks 1 millisecond.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Current mock time in milliseconds.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;tickAsync&quot;,[null,493,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L493&quot;]],[[[null,&quot;&lt;p&gt;Increments the MockClock&amp;#39;s time by a given number of milliseconds, running\nany functions that are now overdue.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[[&quot;millis&quot;,[1,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Number of milliseconds to increment the counter.\nIf not specified, clock ticks 1 millisecond.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;Promise&quot;,null,null,1,[[null,null,null,[&quot;number&quot;,null,null,1,[]]]]]],[[[null,&quot;&lt;p&gt;Current mock time in milliseconds.&lt;/p&gt;\n&quot;]]]],[]],[[&quot;tickPromise&quot;,[null,397,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L397&quot;]],[[[null,&quot;&lt;p&gt;Takes a promise and then ticks the mock clock. If the promise successfully\nresolves, returns the value produced by the promise. If the promise is\nrejected, it throws the rejection as an exception. If the promise is not\nresolved at all, throws an exception.\nAlso ticks the general clock by the specified amount.\nOnly works with goog.Thenable, hence goog.Promise. Does NOT work with native\nbrowser promises.&lt;/p&gt;\n&quot;]]],[[[null,&quot;&lt;p&gt;Treating Promises as synchronous values is incompatible with\nnative promises and async functions. More generally, this code relies on\npromises &amp;#34;pumped&amp;#34; by setTimeout which is not done in production code,\neven for goog.Promise and results unnatural timing between resolved\npromises callback and setTimeout/setInterval callbacks in tests.&lt;/p&gt;\n&quot;]]],null,[null,1],null,null,[],[]],[&quot;T&quot;],null,[[&quot;promise&quot;,[null,null,null,[&quot;goog.Thenable&quot;,null,[null,null,[null,null,&quot;goog.Thenable.html&quot;]],null,[[null,null,null,null,null,[[[null,null,null,[&quot;T&quot;,null,null,null,[]]],[null,null,null,null,null,null,null,null,null,1]]]]]]],[[[null,&quot;&lt;p&gt;A promise that should be resolved after\nthe mockClock is ticked for the given opt_millis.&lt;/p&gt;\n&quot;]]]],[&quot;opt_millis&quot;,[1,null,null,[&quot;number&quot;,null,null,1,[]]],[[[null,&quot;&lt;p&gt;Number of milliseconds to increment the counter.\nIf not specified, clock ticks 1 millisecond.&lt;/p&gt;\n&quot;]]]]],[null,[null,null,null,[&quot;T&quot;,null,null,null,[]]]],[]],[[&quot;uninstall&quot;,[null,280,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L280&quot;]],[[[null,&quot;&lt;p&gt;Removes the MockClock&amp;#39;s hooks into the global object&amp;#39;s functions and revert\nto their original values.&lt;/p&gt;\n&quot;]]],null,null,null,null,null,[],[]],[],null,[],null,[]],[[&quot;unmockDateNow&quot;,[null,226,null,[null,null,&quot;closure/goog/testing/mockclock.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/testing/mockclock.js#L226&quot;]],[[[null,&quot;&lt;p&gt;Unmocks the Date.now() function for tests that aren&amp;#39;t expecting it to be\nmocked. See b/141619890.&lt;/p&gt;\n&quot;]]],[[]],null,[null,1],null,null,[],[]],[],null,[],null,[]]],[[[&quot;creationStack&quot;,[null,37,null,[null,null,&quot;closure/goog/disposable/disposable.js&quot;],[null,null,&quot;https://github.com/google/closure-library/blob/master/closure/goog/disposable/disposable.js#L37&quot;]],[[[null,&quot;&lt;p&gt;If monitoring the goog.Disposable instances is enabled, stores the creation\nstack trace of the Disposable instance.&lt;/p&gt;\n&quot;]]],null,null,null,[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html#creationStack&quot;]],null,[]],null,[],[]],[null,null,null,null,null,[[[null,null,null,[&quot;string&quot;,null,null,1,[]]],[null,null,null,null,null,null,null,null,1]]]]]],null,[[&quot;goog.Disposable&quot;,null,[null,null,[null,null,&quot;goog.Disposable.html&quot;]],null,[]]],[[&quot;goog.disposable.IDisposable&quot;,null,[null,null,[null,null,&quot;goog.disposable.IDisposable.html&quot;]],null,[]]],[],[[&quot;goog.testing.MockClock&quot;,null,[null,null,[null,null,&quot;goog.testing.MockClock.html&quot;]],null,[]],null,null,1],null,&quot;goog.testing.MockClock.html&quot;,&quot;goog.testing.MockClock&quot;,[],[],[],[]]]]]"></main><footer><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></footer></div><script src="dossier.js" defer></script>